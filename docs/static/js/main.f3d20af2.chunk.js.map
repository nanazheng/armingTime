{"version":3,"sources":["armingTime/Track.js","armingTime/CopyContainer.js","armingTime/coordinateToTime.js","armingTime/ArmingTime.js","armingTime/FormContainer.js","armingTime/DetailModal.js","armingTime/Slider.js","armingTime/index.js","App.js","index.js"],"names":["Track","className","offset","length","changeTimeLine","index","slider","style","visibility","left","width","border","height","onClick","showTime","position","title","startTime","defaultVisible","endTime","CopyContent","state","indeterminate","checkAll","copyDays","day","checked","onCheckAllChange","value","map","item","target","setState","changeSingle","e","find","confirm","props","handleCopySave","dayIndex","copyIndexs","i","push","this","handleCloseCopy","borderBottom","onChange","span","disabled","size","type","marginRight","Component","coordinateToTime","startOffset","endOffset","startHour","Math","floor","startMin","endHour","endMin","range","start","end","result","ArmingTime","form","prevHour","data","prevMin","nextHour","nextMin","timelineIndex","timelinersLength","useState","setStartTime","setEndTime","setFieldsValue","time","getFieldValue","defaultOpenValue","moment","placeholder","format","disabledHours","_endTime","split","splice","parseInt","disabledMinutes","disabledMins","margin","_startTime","formItemLayout","labelCol","wrapperCol","create","getFieldDecorator","useEffect","setForm","Item","label","rules","required","message","initialValue","DetailModal","visible","handleOk","handleCancel","time_liners","timelines","selectedTimeline","updateValue","setUpdateValue","setPrevHour","setPrevMin","setNextHour","setNextMin","prevIndex","undefined","nextIndex","footer","onCancel","destroyOnClose","categoryName","pauseEvent","stopPropagation","preventDefault","Slider","coincide","copyVisible","onMouseDown","button","pageX","onStart","addDocumentEvents","getSliderStart","startPosition","_","isEmpty","onMouseMoveListener","addEventListener","document","onMouseMove","onMouseUpListener","getDays","time_sliders","filter","findIndex","remove","handleCopyClose","handleCopyVisible","handleDelete","validateFields","err","values","startTimeString","endTimeString","duration","threshold","refs","getBoundingClientRect","clientWidth","selectSingle","ref","get","content","CopyContainer","trigger","onVisibleChange","marginLeft","onConfirm","okText","cancelText","delete","ArmingTimeNew","days","selectAll","batchDel","del","error","save","App","padding","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f3d20af2.chunk.js","sourcesContent":["import { Tooltip } from \"antd\";\r\n\r\nconst Track = ({\r\n  className,\r\n  offset,\r\n  length,\r\n  changeTimeLine,\r\n  index,\r\n  slider,\r\n}) => {\r\n  const style = {\r\n    visibility: \"visible\",\r\n    left: offset + \"px\",\r\n    width: length + \"px\",\r\n  };\r\n  if (slider.border) {\r\n    style.height = \"14px\";\r\n    style.border = \"1px dotted rgb(34 103 0)\";\r\n  }\r\n  return (\r\n    <div\r\n      onClick={() => changeTimeLine(index)}\r\n      className={className}\r\n      style={style}\r\n    >\r\n      {/* <Tooltip title={<span>{slider.startTime} - {slider.endTime}</span>} defaultVisible={!slider.time}>\r\n        <span className=\"rc-showtime\" style={{width: length, height: 14,}}></span>\r\n      </Tooltip> */}\r\n      {slider.showTime && (\r\n        <div style={{ position: \"relative\" }}>\r\n          <Tooltip title={slider.startTime} defaultVisible={true}>\r\n            <span className=\"rc-track-time\" style={{ left: 0 }}></span>\r\n          </Tooltip>\r\n          <Tooltip title={slider.endTime} defaultVisible={true}>\r\n            <span className=\"rc-track-time\" style={{ left: length - 1 }}></span>\r\n          </Tooltip>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Track;\r\n","import { Component } from \"react\";\r\nimport { Button, Checkbox, Row, Col } from \"antd\";\r\nimport _ from \"lodash\";\r\n\r\nclass CopyContent extends Component {\r\n  state = {\r\n    indeterminate: true,\r\n    checkAll: false,\r\n    copyDays: [\r\n      {\r\n        day: \"周一\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周二\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周三\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周四\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周五\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周六\",\r\n        checked: false,\r\n      },\r\n      {\r\n        day: \"周日\",\r\n        checked: false,\r\n      },\r\n    ],\r\n  };\r\n\r\n  onCheckAllChange = (value) => {\r\n    let copyDays = this.state.copyDays;\r\n    copyDays.map((item) => {\r\n      if (value.target.checked && !item.checked) {\r\n        item.checked = true;\r\n      }\r\n      if (!value.target.checked) {\r\n        item.checked = false;\r\n      }\r\n    });\r\n    this.setState({\r\n      copyDays,\r\n      indeterminate: false,\r\n      checkAll: value.target.checked,\r\n    });\r\n  };\r\n\r\n  changeSingle = (e, index) => {\r\n    let copyDays = this.state.copyDays;\r\n    let indeterminate = true;\r\n    let checkAll = false;\r\n    copyDays[index].checked = e.target.checked;\r\n    if (!copyDays.find((item) => !item.checked)) {\r\n      indeterminate = false;\r\n      checkAll = true;\r\n    }\r\n    this.setState({\r\n      copyDays,\r\n      indeterminate,\r\n      checkAll,\r\n    });\r\n  };\r\n\r\n  confirm = () => {\r\n    let copyDays = this.state.copyDays;\r\n    const { handleCopySave, dayIndex } = this.props;\r\n    let copyIndexs = [];\r\n    copyDays.map((item, i) => {\r\n      if (item.checked && i !== dayIndex) {\r\n        copyIndexs.push(i);\r\n        item.checked = false;\r\n      }\r\n    });\r\n    this.setState({\r\n      copyDays,\r\n    });\r\n    handleCopySave(copyIndexs);\r\n  };\r\n\r\n  render() {\r\n    const { indeterminate, checkAll, copyDays } = this.state;\r\n    const { dayIndex, handleCloseCopy } = this.props;\r\n    return (\r\n      <div>\r\n        <div style={{ borderBottom: \"1px solid #E9E9E9\" }}>\r\n          <Checkbox\r\n            indeterminate={indeterminate}\r\n            onChange={this.onCheckAllChange}\r\n            checked={checkAll}\r\n          >\r\n            全选\r\n          </Checkbox>\r\n        </div>\r\n        <br />\r\n\r\n        <Row>\r\n          {copyDays.map((item, i) => {\r\n            if (i === dayIndex) {\r\n              item.checked = true;\r\n            }\r\n            return (\r\n              <Col span={8} key={i}>\r\n                <Checkbox\r\n                  disabled={i === dayIndex}\r\n                  checked={item.checked}\r\n                  onChange={(e) => this.changeSingle(e, i)}\r\n                >\r\n                  {item.day}\r\n                </Checkbox>\r\n              </Col>\r\n            );\r\n          })}\r\n        </Row>\r\n        <div className=\"popFooter\">\r\n          <Button\r\n            size=\"small\"\r\n            type=\"default\"\r\n            style={{ marginRight: \"10px\" }}\r\n            onClick={handleCloseCopy}\r\n          >\r\n            取消\r\n          </Button>\r\n          <Button size=\"small\" type=\"primary\" onClick={this.confirm}>\r\n            确认\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CopyContent;\r\n","export function coordinateToTime(startOffset, endOffset) {\r\n  //slider 的 width 为720，60 * 24 = 1440，为了都用整数好计算，所以 * 2\r\n  const startHour = Math.floor((startOffset * 2) / 60);\r\n  const startMin = (startOffset * 2) % 60;\r\n  const endHour = Math.floor((endOffset * 2) / 60);\r\n  const endMin = (endOffset * 2) % 60;\r\n  const startTime = `${startHour > 9 ? startHour : `0${startHour}`}:${\r\n    startMin > 9 ? startMin : `0${startMin}`\r\n  }`;\r\n  const endTime = `${endHour > 9 ? endHour : `0${endHour}`}:${\r\n    endMin > 9 ? endMin : `0${endMin}`\r\n  }`;\r\n  return {\r\n    startTime,\r\n    endTime,\r\n    startHour,\r\n    startMin,\r\n    endHour,\r\n    endMin,\r\n  };\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { TimePicker } from \"antd\";\r\nimport moment from \"moment\";\r\n\r\nfunction range(start, end) {\r\n  let result = [];\r\n  for (var i = start; i <= end; i++) {\r\n    result.push(i);\r\n  }\r\n  return result;\r\n}\r\n\r\nconst ArmingTime = (props) => {\r\n  const {\r\n    value,\r\n    form,\r\n    data,\r\n    prevHour,\r\n    prevMin,\r\n    nextHour,\r\n    nextMin,\r\n    timelineIndex,\r\n    timelinersLength,\r\n  } = props;\r\n  const [startTime, setStartTime] = useState(value.startTime);\r\n  const [endTime, setEndTime] = useState(value.endTime);\r\n\r\n  const onChangeStartTime = (value) => {\r\n    setStartTime(value);\r\n    form.setFieldsValue({\r\n      time: {\r\n        ...form.getFieldValue(\"time\"),\r\n        startTime: value,\r\n      },\r\n    });\r\n  };\r\n  const onChangeEndTime = (value) => {\r\n    setEndTime(value);\r\n    form.setFieldsValue({\r\n      time: {\r\n        ...form.getFieldValue(\"time\"),\r\n        endTime: value,\r\n      },\r\n    });\r\n  };\r\n  const disabledStartHours = () => {\r\n    let disabledHours = range(0, 23);\r\n    const _endTime = moment(endTime).format(\"HH:mm\").split(\":\");\r\n    if (timelineIndex === 0) {\r\n      disabledHours.splice(0, parseInt(_endTime[0]) + 1);\r\n    } else {\r\n      disabledHours.splice(prevHour, parseInt(_endTime[0]) - prevHour + 1);\r\n    }\r\n    return disabledHours;\r\n  };\r\n  const disabledStartMinutes = (value) => {\r\n    const _endTime = moment(endTime).format(\"HH:mm\").split(\":\");\r\n    let disabledMins = [];\r\n    if (value === prevHour) {\r\n      disabledMins = range(0, 59).splice(0, prevMin + 1);\r\n    }\r\n    if (value === parseInt(_endTime[0])) {\r\n      disabledMins = range(0, 59).splice(_endTime[1], 59);\r\n    }\r\n    return disabledMins;\r\n  };\r\n  const disabledEndHours = () => {\r\n    let disabledHours = range(0, 23);\r\n    const _startTime = moment(startTime).format(\"HH:mm\").split(\":\");\r\n    if (timelineIndex === timelinersLength - 1) {\r\n      disabledHours.splice(parseInt(_startTime[0]), 59);\r\n    } else {\r\n      disabledHours.splice(\r\n        parseInt(_startTime[0]),\r\n        nextHour - parseInt(_startTime[0]) + 1\r\n      );\r\n    }\r\n    return disabledHours;\r\n  };\r\n  const disabledEndMinutes = (value) => {\r\n    const _startTime = moment(startTime).format(\"HH:mm\").split(\":\");\r\n    let disabledMins = [];\r\n    if (value === nextHour) {\r\n      disabledMins = range(0, 59).splice(nextMin, 59);\r\n    }\r\n    if (value === parseInt(_startTime[0])) {\r\n      disabledMins = range(0, 59).splice(0, parseInt(_startTime[1]) + 1);\r\n    }\r\n    return disabledMins;\r\n  };\r\n  return (\r\n    <>\r\n      <TimePicker\r\n        onChange={onChangeStartTime}\r\n        defaultOpenValue={moment(startTime, \"HH:mm\")}\r\n        value={startTime}\r\n        placeholder=\"请选择时间\"\r\n        format={\"HH:mm\"}\r\n        disabledHours={disabledStartHours}\r\n        disabledMinutes={disabledStartMinutes}\r\n      />\r\n      <span style={{ margin: \"0px 8px\" }}>至</span>\r\n      <TimePicker\r\n        onChange={onChangeEndTime}\r\n        defaultOpenValue={moment(endTime, \"HH:mm\")}\r\n        value={endTime}\r\n        placeholder=\"请选择时间\"\r\n        format={\"HH:mm\"}\r\n        disabledHours={disabledEndHours}\r\n        disabledMinutes={disabledEndMinutes}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ArmingTime;\r\n","import { useEffect, useState } from \"react\";\r\nimport { Form, InputNumber, TimePicker } from \"antd\";\r\nimport ArmingTime from \"./ArmingTime\";\r\nimport moment from \"moment\";\r\nimport _ from \"lodash\";\r\n\r\nconst formItemLayout = {\r\n  labelCol: { span: 5 },\r\n  wrapperCol: { span: 16 },\r\n};\r\n\r\nfunction FormContainer(props) {\r\n  const {\r\n    startTime,\r\n    endTime,\r\n    form,\r\n    prevHour,\r\n    prevMin,\r\n    nextHour,\r\n    nextMin,\r\n    timelineIndex,\r\n    timelinersLength,\r\n    data,\r\n  } = props;\r\n  const { getFieldDecorator } = form;\r\n\r\n  useEffect(() => {\r\n    props.setForm(props.form);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Form {...formItemLayout} className=\"login-form\">\r\n        <Form.Item label=\"布防时间\">\r\n          {getFieldDecorator(\"time\", {\r\n            rules: [{ required: true, message: \"\" }],\r\n            initialValue: {\r\n              startTime: moment(startTime, \"HH:mm\"),\r\n              endTime: moment(endTime, \"HH:mm\"),\r\n            },\r\n          })(\r\n            <ArmingTime\r\n              form={form}\r\n              data={data}\r\n              prevHour={prevHour}\r\n              prevMin={prevMin}\r\n              nextHour={nextHour}\r\n              nextMin={nextMin}\r\n              timelineIndex={timelineIndex}\r\n              timelinersLength={timelinersLength}\r\n            />\r\n          )}\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Form.create()(FormContainer);\r\n","import { useState, useEffect } from \"react\";\r\nimport { Button, Modal, Descriptions } from \"antd\";\r\nimport { coordinateToTime } from \"./coordinateToTime\";\r\nimport FormContainer from \"./FormContainer\";\r\nimport _ from \"lodash\";\r\n\r\nfunction DetailModal(props) {\r\n  const { visible, handleOk, handleCancel, day, timelineIndex } = props;\r\n  const time_liners = day.timelines;\r\n  const selectedTimeline = time_liners[timelineIndex];\r\n  const startTime = selectedTimeline?.startTime;\r\n  const endTime = selectedTimeline?.endTime;\r\n  const [updateValue, setUpdateValue] = useState(null);\r\n  const [prevHour, setPrevHour] = useState(\"\");\r\n  const [prevMin, setPrevMin] = useState(\"\");\r\n  const [nextHour, setNextHour] = useState(\"\");\r\n  const [nextMin, setNextMin] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (timelineIndex === null || !visible) return;\r\n    //提取当前时间条的上一个时间条的endTime和下一个时间条的startTime\r\n    const prevIndex = timelineIndex - 1 >= 0 ? timelineIndex - 1 : undefined;\r\n    const nextIndex =\r\n      timelineIndex + 1 < time_liners.length ? timelineIndex + 1 : undefined;\r\n    if (prevIndex !== undefined) {\r\n      setPrevHour(time_liners[prevIndex].endHour);\r\n      setPrevMin(time_liners[prevIndex].endMin);\r\n    }\r\n    if (nextIndex !== undefined) {\r\n      setNextHour(time_liners[nextIndex].startHour);\r\n      setNextMin(time_liners[nextIndex].startMin);\r\n    }\r\n  }, [day, timelineIndex, visible]);\r\n\r\n  return (\r\n    <Modal\r\n      title=\"修改时间\"\r\n      visible={visible}\r\n      footer={\r\n        <Button type=\"primary\" onClick={() => handleOk(updateValue)}>\r\n          保存\r\n        </Button>\r\n      }\r\n      onCancel={handleCancel}\r\n      destroyOnClose\r\n    >\r\n      <FormContainer\r\n        categoryName=\"\"\r\n        setForm={(form) => {\r\n          setUpdateValue(form);\r\n        }}\r\n        startTime={startTime}\r\n        endTime={endTime}\r\n        prevHour={prevHour}\r\n        prevMin={prevMin}\r\n        nextHour={nextHour}\r\n        nextMin={nextMin}\r\n        timelineIndex={timelineIndex}\r\n        timelinersLength={time_liners.length}\r\n        data={selectedTimeline}\r\n      />\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default DetailModal;\r\n","import React, { Component, createRef } from \"react\";\r\nimport { Checkbox, Popover, Popconfirm } from \"antd\";\r\nimport addEventListener from \"rc-util/lib/Dom/addEventListener\";\r\nimport Track from \"./Track\";\r\nimport CopyContainer from \"./CopyContainer\";\r\nimport DetailModal from \"./DetailModal\";\r\nimport { coordinateToTime } from \"./coordinateToTime\";\r\nimport moment from \"moment\";\r\nimport _ from \"lodash\";\r\nimport \"../index.css\";\r\n\r\nfunction range(start, end) {\r\n  const result = [];\r\n  for (var i = start; i <= end; i++) {\r\n    result.push(i);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction pauseEvent(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n}\r\nclass Slider extends Component {\r\n  state = {\r\n    coincide: false,\r\n    copyVisible: false,\r\n    timelineIndex: null,\r\n    visible: false,\r\n  };\r\n\r\n  onMouseDown = (e) => {\r\n    if (e.button !== 0) {\r\n      return;\r\n    }\r\n    const position = e.pageX;\r\n    this.onStart(position);\r\n    this.addDocumentEvents(\"mouse\");\r\n    pauseEvent(e);\r\n  };\r\n\r\n  onStart = (position) => {\r\n    const { day } = this.props;\r\n    const value = position - this.getSliderStart();\r\n    this.offset = Math.floor(value); //当前画线的offset\r\n    this.startPosition = position; //当前画线开始的位置\r\n    this.index = day.timelines.length; //当前画线的index\r\n    let coincide = false;\r\n    if (!_.isEmpty(day.timelines)) {\r\n      //处理条重合\r\n      day.timelines.map((slider) => {\r\n        if (slider.offset < value && slider.offset + slider.length > value) {\r\n          coincide = true;\r\n        }\r\n      });\r\n    }\r\n    this.setState({\r\n      coincide,\r\n    });\r\n  };\r\n\r\n  addDocumentEvents = () => {\r\n    this.onMouseMoveListener = addEventListener(\r\n      document,\r\n      \"mousemove\",\r\n      this.onMouseMove\r\n    );\r\n    this.onMouseUpListener = addEventListener(document, \"mouseup\", this.end);\r\n  };\r\n\r\n  onMouseMove = (e) => {\r\n    pauseEvent(e);\r\n    const position = e.pageX;\r\n    const { coincide } = this.state;\r\n    const { day, getDays, dayIndex } = this.props;\r\n    if (coincide) return;\r\n    let length = position - this.startPosition,\r\n      time_sliders = day.timelines;\r\n    // 当画线超过slider总长度时\r\n    if (this.offset + length >= 720) {\r\n      length = 719.5 - this.offset;\r\n    }\r\n    //限制线重合\r\n    day.timelines.map((slider) => {\r\n      if (this.offset < slider.offset && this.offset + length > slider.offset) {\r\n        length = slider.offset - this.offset - 1;\r\n      }\r\n    });\r\n    const { startTime, endTime, startHour, startMin, endHour, endMin } =\r\n      coordinateToTime(this.offset, this.offset + length);\r\n    time_sliders[this.index] = {\r\n      offset: this.offset,\r\n      length,\r\n      startTime,\r\n      endTime,\r\n      startHour,\r\n      startMin,\r\n      endHour,\r\n      endMin,\r\n      showTime: true,\r\n    };\r\n    //过滤 length <=0的slider\r\n    time_sliders = time_sliders.filter((slider) => slider.length > 0);\r\n    // time_sliders.sort(function (a, b) {\r\n    //   return a.offset - b.offset;\r\n    // }); //排序，方便限制modal的时间选择\r\n    getDays(time_sliders, dayIndex);\r\n    // this.setState({\r\n    //   timelines: time_sliders,\r\n    //   toolTip: false\r\n    // })\r\n  };\r\n\r\n  end = () => {\r\n    const { day, getDays, dayIndex } = this.props;\r\n    let time_sliders = day.timelines;\r\n    const index = time_sliders.findIndex((slider) => slider.showTime);\r\n    if (index > -1) {\r\n      time_sliders[index].showTime = false;\r\n    }\r\n    getDays(time_sliders, dayIndex);\r\n    // removeEvents\r\n    this.onMouseMoveListener.remove();\r\n    this.onMouseUpListener.remove();\r\n  };\r\n\r\n  //获取slider的位置-left\r\n  getSliderStart() {\r\n    const slider = this.refs.slider;\r\n    const rect = slider.getBoundingClientRect();\r\n    return rect.left;\r\n  }\r\n\r\n  getSliderLength() {\r\n    const slider = this.refs.slider;\r\n    if (!slider) {\r\n      return 0;\r\n    }\r\n    return slider.clientWidth;\r\n  }\r\n\r\n  //复制\r\n  handleCopySave = (copyIndexs) => {\r\n    const { day, getDays } = this.props;\r\n    copyIndexs.map((index) => {\r\n      getDays(day.timelines, index);\r\n    });\r\n    this.setState({\r\n      copyVisible: false,\r\n    });\r\n  };\r\n\r\n  //关闭复制窗口\r\n  handleCopyClose = () => {\r\n    this.setState({\r\n      copyVisible: false,\r\n    });\r\n  };\r\n\r\n  //控制复制弹窗是否显示\r\n  handleCopyVisible = (copyVisible) => {\r\n    const { day } = this.props;\r\n    if (_.isEmpty(day.timelines)) return;\r\n    this.setState({\r\n      copyVisible,\r\n    });\r\n  };\r\n\r\n  changeTimeLine = (timelineIndex) => {\r\n    const { day, getDays, dayIndex } = this.props;\r\n    let time_sliders = day.timelines;\r\n    time_sliders.map((slider) => {\r\n      if (slider.border) slider.border = false;\r\n    });\r\n    time_sliders[timelineIndex].border = true;\r\n    getDays(time_sliders, dayIndex);\r\n    this.setState({\r\n      timelineIndex,\r\n      visible: true,\r\n    });\r\n  };\r\n\r\n  handleDelete = () => {\r\n    const { timelineIndex } = this.state;\r\n    const { day, dayIndex, getDays } = this.props;\r\n    if (_.isEmpty(day.timelines) || timelineIndex === null) return;\r\n    let time_sliders = day.timelines;\r\n    time_sliders.splice(timelineIndex, 1);\r\n    getDays(time_sliders, dayIndex);\r\n    this.setState({\r\n      timelineIndex: null,\r\n    });\r\n  };\r\n\r\n  //弹窗点击保存\r\n  handleOk = (value) => {\r\n    value.validateFields((err, values) => {\r\n      if (!err) {\r\n        const { timelineIndex } = this.state;\r\n        const { day, dayIndex, getDays } = this.props;\r\n        let time_sliders = day.timelines;\r\n        const startTime = moment(values.time.startTime).format(\"HH:mm\");\r\n        const endTime = moment(values.time.endTime).format(\"HH:mm\");\r\n        const startTimeString = startTime.split(\":\");\r\n        const endTimeString = endTime.split(\":\");\r\n        const startHour = parseInt(startTimeString[0]);\r\n        const startMin = parseInt(startTimeString[1]);\r\n        const endHour = parseInt(endTimeString[0]);\r\n        const endMin = parseInt(endTimeString[1]);\r\n        \r\n        const offset = (startHour * 60 + startMin) / 2;\r\n        const length = (endHour * 60 + endMin) / 2 - offset;\r\n        time_sliders[timelineIndex] = {\r\n          ...time_sliders[timelineIndex],\r\n          offset,\r\n          length,\r\n          startTime,\r\n          endTime,\r\n          startHour,\r\n          startMin,\r\n          endHour,\r\n          endMin,\r\n          duration: values.duration ? values.duration : undefined,\r\n          threshold: values.threshold ? values.threshold : undefined,\r\n        };\r\n        getDays(time_sliders, dayIndex);\r\n        this.setState({\r\n          visible: false,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //弹窗关闭\r\n  handleCancel = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { day, dayIndex, selectSingle } = this.props;\r\n    const { copyVisible, timelineIndex, visible } = this.state;\r\n    return (\r\n      <div className=\"rc-day\">\r\n        <Checkbox\r\n          checked={day.checked}\r\n          className=\"rc-checkbox\"\r\n          onChange={() => selectSingle(dayIndex)}\r\n        />\r\n        <div className=\"rc-date\">{day.day}</div>\r\n        <div className=\"rc-timeline\">\r\n          <div className=\"rc-time\">\r\n            {range(0, 24).map((item) => {\r\n              return (\r\n                <div className=\"rc-hour\" key={item}>\r\n                  <span>{item}</span>\r\n                  <i className=\"rc-line\"></i>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div\r\n            ref=\"slider\"\r\n            onMouseDown={this.onMouseDown}\r\n            className=\"rc-slider\"\r\n          >\r\n            {_.get(day, \"timelines\").map((slider, i) => {\r\n              return (\r\n                <Track\r\n                  changeTimeLine={this.changeTimeLine}\r\n                  key={i}\r\n                  index={i}\r\n                  slider={slider}\r\n                  className=\"rc-slider-track\"\r\n                  offset={slider.offset}\r\n                  length={slider.length}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className=\"rc-action\">\r\n          <Popover\r\n            content={\r\n              <CopyContainer\r\n                dayIndex={dayIndex}\r\n                handleCopySave={this.handleCopySave}\r\n                handleCloseCopy={this.handleCopyClose}\r\n              />\r\n            }\r\n            title=\"复制到...\"\r\n            trigger=\"click\"\r\n            visible={copyVisible}\r\n            onVisibleChange={this.handleCopyVisible}\r\n          >\r\n            <a\r\n              className={_.isEmpty(day.timelines) ? \"disabled\" : \"rc-copy\"}\r\n              style={{ marginLeft: 0 }}\r\n            >\r\n              复制\r\n            </a>\r\n          </Popover>\r\n          <Popconfirm\r\n            title=\"确定删除吗\"\r\n            onConfirm={this.handleDelete}\r\n            okText=\"确定\"\r\n            cancelText=\"取消\"\r\n          >\r\n            <a\r\n              className={\r\n                _.isEmpty(day.timelines) || !day.delete ? \"disabled\" : \"rc-del\"\r\n              }\r\n            >\r\n              删除\r\n            </a>\r\n          </Popconfirm>\r\n        </div>\r\n        <DetailModal\r\n          visible={visible}\r\n          handleCancel={this.handleCancel}\r\n          handleOk={this.handleOk}\r\n          day={day}\r\n          timelineIndex={timelineIndex}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React, { Component } from \"react\";\r\nimport { Checkbox, Button, Popconfirm, Icon, message } from \"antd\";\r\nimport Slider from \"./Slider\";\r\nimport _ from \"lodash\";\r\nimport \"../index.css\";\r\n\r\nclass ArmingTimeNew extends Component {\r\n  state = {\r\n    days: [\r\n      { day: \"周一\", timelines: [], checked: false, delete: false },\r\n      { day: \"周二\", timelines: [], checked: false, delete: false },\r\n      { day: \"周三\", timelines: [], checked: false, delete: false },\r\n      { day: \"周四\", timelines: [], checked: false, delete: false },\r\n      { day: \"周五\", timelines: [], checked: false, delete: false },\r\n      { day: \"周六\", timelines: [], checked: false, delete: false },\r\n      { day: \"周日\", timelines: [], checked: false, delete: false },\r\n    ],\r\n    indeterminate: false, //控制CheckBoxAll的样式\r\n    checkAll: false,\r\n  };\r\n\r\n  getDays = (time_sliders, dayIndex) => {\r\n    let days = this.state.days;\r\n    const index = time_sliders.findIndex((slider) => slider.border === true);\r\n    if (index > -1) {\r\n      days[dayIndex].delete = true;\r\n    } else {\r\n      days[dayIndex].delete = false;\r\n    }\r\n    days[dayIndex].timelines = time_sliders;\r\n    this.setState({\r\n      days,\r\n    });\r\n  };\r\n\r\n  selectAll = (e) => {\r\n    let days = this.state.days;\r\n    days.map((day) => {\r\n      if (e.target.checked && !day.checked) {\r\n        day.checked = true;\r\n      }\r\n      if (!e.target.checked) {\r\n        day.checked = false;\r\n      }\r\n    });\r\n    this.setState({\r\n      days,\r\n      indeterminate: false,\r\n      checkAll: e.target.checked,\r\n    });\r\n  };\r\n\r\n  selectSingle = (index) => {\r\n    let days = this.state.days;\r\n    let indeterminate = false;\r\n    let checkAll = false;\r\n    days[index].checked = !days[index].checked;\r\n    days.map((day) => {\r\n      if (day.checked) {\r\n        indeterminate = true;\r\n      }\r\n    });\r\n    if (!days.find((day) => !day.checked)) {\r\n      indeterminate = false;\r\n      checkAll = true;\r\n    }\r\n    this.setState({\r\n      days,\r\n      indeterminate,\r\n      checkAll,\r\n    });\r\n  };\r\n\r\n  batchDel = () => {\r\n    let days = this.state.days,\r\n      del = false;\r\n    days.map((day) => {\r\n      if (day.checked) {\r\n        del = true;\r\n        day.timelines = [];\r\n        day.checked = false;\r\n      }\r\n    });\r\n    if (!del) {\r\n      message.error(\"请先选择一个数据\");\r\n    }\r\n    this.setState({\r\n      days,\r\n      indeterminate: false,\r\n      checkAll: false,\r\n    });\r\n  };\r\n\r\n  save = () => {};\r\n\r\n  render() {\r\n    const { days, indeterminate, checkAll } = this.state;\r\n    return (\r\n      <>\r\n        <div className=\"rc-batch-operation\">\r\n          <Popconfirm\r\n            title=\"确定批量删除吗\"\r\n            onConfirm={this.batchDel}\r\n            okText=\"确定\"\r\n            cancelText=\"取消\"\r\n          >\r\n            <a className=\"rc-batch-delete\">\r\n              <Icon className=\"rc-icon\" type=\"delete\" />\r\n              <span>批量删除</span>\r\n            </a>\r\n          </Popconfirm>\r\n        </div>\r\n        <div className=\"rc-table\">\r\n          <div className=\"rc-header\">\r\n            <Checkbox\r\n              className=\"rc-checkbox\"\r\n              indeterminate={indeterminate}\r\n              checked={checkAll}\r\n              onChange={this.selectAll}\r\n            ></Checkbox>\r\n            <div className=\"rc-date\">日期</div>\r\n            <div className=\"rc-timeline-header\">时间段</div>\r\n            <div className=\"rc-action\">操作</div>\r\n          </div>\r\n          {days.map((item, i) => {\r\n            return (\r\n              <Slider\r\n                key={item.day}\r\n                day={item}\r\n                selectSingle={this.selectSingle}\r\n                dayIndex={i}\r\n                getDays={this.getDays}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"rc-save\">\r\n          <Button type=\"primary\" onClick={this.save}>\r\n            保存\r\n          </Button>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ArmingTimeNew;\r\n","import ArmingTime from \"./armingTime\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div style={{ width: 1072, padding: '20px' }}>\r\n      <ArmingTime />\r\n    </div>\r\n  );\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}